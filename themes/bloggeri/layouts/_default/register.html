{{ define "main" }}
<section class="section">
  <article>      
    <div class="container">
      <div class="post">
        <h1 data-pagefind-ignore class="post-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h1>
  <div class="content-new">
        <div class="columns is-multiline">


  <form id="registrationForm" action="https://testvercel-gamma-seven.vercel.app/register" method="POST">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required><br><br>

    <label for="username">Username:</label>
    <input type="text" id="username" name="username" required><br><br>

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required><br><br>

    <input type="submit" value="Register">
  </form>

  <div id="messageContainer"></div>
          
       <script>document.getElementById("registrationForm").addEventListener("submit", function(event) {
  event.preventDefault(); // Prevent form submission

  var email = document.getElementById("email").value;
  var username = document.getElementById("username").value;
  var password = document.getElementById("password").value;

  var xhr = new XMLHttpRequest();
  xhr.open("POST", "https://testvercel-gamma-seven.vercel.app/register", true);
  xhr.setRequestHeader("Content-Type", "application/json");

  xhr.onreadystatechange = function() {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        // Registration successful
        var response = JSON.parse(xhr.responseText);
        console.log("Registration successful. User ID: " + response.userId);
        // Perform actions or show success message on the same page
      } else {
        console.log("Registration failed. Error: " + xhr.responseText);
        // Show error message on the same page
      }
    }
  };

  var data = JSON.stringify({ email, username, password });
  xhr.send(data);
});</script>

     </div>
    </div>     </div>   </div>  
  </article>    
</section>
{{ end }}
