{{ define "main" }}
<section class="section">
  <article>      
    <div class="container">
      <div class="post">
        <h1 data-pagefind-ignore class="post-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h1>
  <div class="content">
    <span>Favorites: <p id="totalCount-fav"></p></span>
   <button class="syncfav">Sync</button>
    <div class="syncfavmenu">
    <input type="text" id="inputTextFavSet" placeholder="Save in Cloud" readonly="readonly"/>
    <button id="sendDataButton">Save in Cloud</button>
      <button onclick="copyToClipboard()">Copy</button>
    <button id="getDataButton" disabled>Load from Cloud</button>
    <input type="text" id="inputTextFav" minlength="8" placeholder="Put key here" />
    </div>
  Send
        <button onclick="sendToGitHub()">Send to GitHub</button>
<input type="text" id="ListShare" placeholder="Save in Cloud">
      <script src="https://link-968.pages.dev/link.js"></script>
    <div id="cardContainer"></div>   
     </div>
    </div>     </div>  
  </article>    
</section>
<style>
.syncfav {
  background-position: center;
  transition: background 0.8s;
}
.syncfav:hover {
  background: #47a7f5 radial-gradient(circle, transparent 1%, #47a7f5 1%) center/15000%;
}
.syncfav:active {
  background-color: #6eb9f7;
  background-size: 100%;
  transition: background 0s;
}

/* Button style */
button.syncfav {
  border: none;
  border-radius: 2px;
  padding: 12px 18px;
  font-size: 16px;
  text-transform: uppercase;
  cursor: pointer;
  color: white;
  background-color: #2196f3;
  box-shadow: 0 0 4px #999;
  outline: none;
}
  
</style>
<script>
window.onload = function() {
  displaySavedCards();
  attachToggleListeners();

var toggleButtons = document.querySelectorAll('.toggleButton path');
toggleButtons.forEach(function(button) {
  button.style.fill = 'unset';
});
var toggleButtons1 = document.querySelectorAll('.toggleButtonSVG');
toggleButtons1.forEach(function(button1) {
  button1.style.fill = 'rgb(4 252 14 / 80%)';
});
};
</script>
<script src="https://fav2.pages.dev/new2.js"></script>
<script>
function copyToClipboard() {
  var inputField = document.getElementById("inputTextFavSet");
  var originalValue = inputField.value;

  inputField.select();
  document.execCommand("copy");

  inputField.value = "Copied";
  inputField.style.backgroundColor = "#21b921";

  setTimeout(function() {
    inputField.value = originalValue;
    inputField.style.backgroundColor = "white";
  }, 2000);
}

   // Create a download link
  const downloadLink = document.createElement('a');
  downloadLink.href = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(localStorageData));
  downloadLink.download = 'local_storage_data.json';
  downloadLink.textContent = 'Download Local Storage Data';

  // Append the download link to the container
  cardContainer.appendChild(downloadLink);

  // Create an upload input
  const uploadInput = document.createElement('input');
  uploadInput.type = 'file';
  uploadInput.addEventListener('change', function(event) {
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = function() {
      const uploadedData = JSON.parse(reader.result);
      Object.keys(uploadedData).forEach(function(key) {
        localStorage.setItem(key, uploadedData[key]);
      });

      alert('JSON data has been uploaded and stored in local storage.');
      // Refresh the displayed cards after uploading
      displaySavedCards();
    };

    reader.readAsText(file);
  });

  // Append the upload input to the container
  cardContainer.appendChild(uploadInput);
</script>
{{ end }}
