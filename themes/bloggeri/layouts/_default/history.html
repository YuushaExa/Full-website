{{ define "main" }}
<section class="section">
  <article>      
    <div class="container">
      <div class="post">
        <h1 data-pagefind-ignore class="post-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h1>
  <div class="content">
        <div class="columns is-multiline">
 <div id="history"></div></div>
    <script>
document.addEventListener('DOMContentLoaded', function() {
  var historyContainer = document.getElementById('history');

  // Retrieve previously stored data from local storage
  var storedData = localStorage.getItem('History');

  if (storedData) {
    var cardData = JSON.parse(storedData);

    // Sort cardData by dateAdded in ascending order
    cardData.sort(function(a, b) {
      return new Date(a.dateAdded) - new Date(b.dateAdded);
    });

    // Group cards by dateAdded
    var groupedData = groupBy(cardData, 'dateAdded');

    // Iterate over groupedData
    Object.keys(groupedData).forEach(function(dateAdded) {
      // Create a dateAdded element
      var dateAddedElement = document.createElement('div');
      dateAddedElement.classList.add('date-added');
      dateAddedElement.textContent = formatDate(dateAdded); // Format the date if needed

      // Append the dateAdded element to the historyContainer
      historyContainer.appendChild(dateAddedElement);

      // Iterate over the cards for the current dateAdded
      groupedData[dateAdded].forEach(function(data) {
        var card = document.createElement('div');
        card.classList.add('card');

        // Create the card elements as before
        // ...

        // Append the card to the historyContainer
        historyContainer.appendChild(card);
      });
    });
  }
});

// Helper function to group an array of objects by a specific key
function groupBy(array, key) {
  return array.reduce(function(result, obj) {
    (result[obj[key]] = result[obj[key]] || []).push(obj);
    return result;
  }, {});
}

// Helper function to format the date if needed
function formatDate(date) {
  // Implement date formatting logic here
  return date;
}
    </script>
     </div>
    </div>     </div>  
  </article>    
</section>
{{ end }}
