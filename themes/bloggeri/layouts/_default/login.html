{{ define "main" }}
<section class="section">
  <article>      
    <div class="container">
      <div class="post">
        <h1 data-pagefind-ignore class="post-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h1>
  <div class="content">
    Register ID
   <input type="text" id="Login" placeholder="Enter your login" oninput="validateLogin(event)">
  <button onclick="Register()">Register</button>
  </br>
    Your ID
    <input type="text" id="password" placeholder="Your ID" readonly="readonly"/>
    Restore ID
      <input type="text" id="RestoreID" placeholder="Enter Secret Key">
    <button onclick="Restore()">Restore</button>
    </div>    
<button id="deleteButton">Delete ID</button>

<script>
  document.getElementById('deleteButton').addEventListener('click', function() {
    var confirmation = confirm("Are you sure you want to delete the ID?");
    if (confirmation) {
      // User clicked "Yes"
      localStorage.removeItem('Account');
      document.getElementById('password').value = '';
      document.getElementById('Login').style.backgroundColor = 'white';
      document.getElementById('Login').readOnly = false;
    } else {
      // User clicked "No"
      // Handle the cancel action or do nothing
    }
  });

   function validateLogin(event) {
    const input = event.target;
    const value = input.value;
    const forbiddenChar = '#';

    if (value.includes(forbiddenChar)) {
      input.value = value.replace(forbiddenChar, '');
    }
  }

   function Restore() {
      var gistURL = document.getElementById("RestoreID").value;
      var gistID = gistURL.split('/').pop();

      if (gistID) {
        var rawURL = `https://gist.githubusercontent.com/${gistID}/raw`;

        fetch(rawURL)
          .then(response => response.json())
          .then(data => {
            var gistData = JSON.stringify(data);
            localStorage.setItem("gistData", gistData);
            console.log("Gist data stored in local storage.");
          })
          .catch(error => {
            console.error("Error fetching ID:", error);
          });
      } else {
        console.error("Invalid ID URL.");
      }
    }
</script>
      </div>  
       </div>  
  </article>    
</section>
<script src="https://log-4di.pages.dev/log.js"></script>

{{ end }}
