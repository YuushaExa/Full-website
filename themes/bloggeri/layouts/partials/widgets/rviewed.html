<script>
// Assuming historyData is an array containing the historical values

// Sort the historyData array in descending order based on timestamp or any other appropriate criteria
historyData.sort(function(a, b) {
  return b.timestamp - a.timestamp;
});

// Get the 5 latest values from historyData
var latestValues = historyData.slice(0, 5);

// Get the RecentlyViewed container element
var recentlyViewedContainer = document.getElementById('RecentlyViewed');

// Iterate over the latest values
latestValues.forEach(function(data) {
  var card = document.createElement('div');
  card.classList.add('card');

  var cardImageLink = document.createElement('a');
  cardImageLink.classList.add('card-image');
  cardImageLink.href = data.href;

  var cardImage = document.createElement('img');
  var wrappedImageURL = 'https://wsrv.nl/?url=' + encodeURIComponent(data.image) + '&output=webp&maxage=1d&w=200&h=300&fit=cover&a=attention';
  cardImage.src = wrappedImageURL;
  cardImage.alt = '';
  cardImage.crossOrigin = 'anonymous';
  cardImage.classList.add('lazyload');
  cardImage.setAttribute('data-src', data.wrappedImageURL);

  cardImageLink.appendChild(cardImage);
  card.appendChild(cardImageLink);

  var cardContent = document.createElement('div');
  cardContent.classList.add('card-content');

  var titleLink = document.createElement('a');
  titleLink.classList.add('title', 'is-4');
  titleLink.textContent = data.title;

  cardContent.appendChild(titleLink);
  card.appendChild(cardContent);

  recentlyViewedContainer.appendChild(card);
});
</script>
