{{ $firstWord := (split .Title " " | first 1) }}
{{ $relatedPosts := slice }}

{{ range .Site.RegularPages }}
    {{ if and (eq .Type "post") (eq (split .Params.title " " | first 1) $firstWord) }}
        {{ $relatedPosts = $relatedPosts | append . }}
    {{ end }}
{{ end }}

{{ if eq (len $relatedPosts) 0 }}
    <!-- No related posts found -->
{{ else }}
    <h3>Related Posts</h3>
    <ul>
        {{ range first 5 $relatedPosts }}
            <li><a href="{{ .Permalink }}">{{ .Params.title }}</a></li>
        {{ end }}
    </ul>
{{ end }}
