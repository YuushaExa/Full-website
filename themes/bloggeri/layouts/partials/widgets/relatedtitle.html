{{ $currentTitle := .Title }}
{{ $firstWord := index (split $currentTitle " ") 0 }}
{{ $relatedPosts := where .Site.RegularPages "and (ne .Title $currentTitle) (eq (index (split .Title " ") 0) $firstWord)" }}
{{ $relatedPosts := first 5 $relatedPosts }}

{{ if gt (len $relatedPosts) 0 }}
  <div class="related-posts">
    <h3>Related Posts</h3>
    <ul>
      {{ range $relatedPosts }}
        <li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
      {{ end }}
    </ul>
  </div>
{{ end }}
